<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.swm.mappers.WebMapper">
    <resultMap id="web" type="kr.co.swm.model.dto.WebDto">
        <!-- 사용자 계정 정보 -->
        <result column="USER_NO" property="userNo"/>
        <result column="USER_ID" property="userId"/>
        <result column="USER_NAME" property="userName"/>
        <result column="USER_PHONE" property="userPhone"/>
        <result column="CREATED_DATE" property="userCreatDate"/>
        <result column="DELETED_DATE" property="userDeleteDate"/>
        <result column="USER_ROLES" property="userRoles"/>

        <!-- 판매자 계정 정보 -->
        <result column="ACCOMODATION_ADMIN_NO" property="sellerNo"/>
        <result column="ADMIN_ID" property="sellerId"/>
        <result column="ADMIN_TYPE" property="sellerRoles"/>

        <!-- 관리자 계정 정보 -->
        <result column="ACCOMODATION_MANAGER_NO" property="adminNo"/>
        <result column="MANAGER_ID" property="adminId"/>
        <result column="MANAGER_TYPE" property="adminRoles"/>

        <!-- 업소 정보 -->
        <result column="ACCOMMODATION_NO" property="accommodationNo"/>
        <result column="ROOM_NAME" property="accommodationName"/>
        <result column="ACCOMMODATION_TYPE" property="accommodationType"/>
        <result column="PHONE" property="accommodationPhone"/>

        <!-- 매출 정보 -->
        <result column="BOOKING_NO" property="bookingNo"/>
        <result column="RESULT_AMOUNT" property="reservationAmount"/>
        <result column="RESERVATION_DATE" property="reservationDate"/>
        <result column="RESERVATION_STATUS" property="reservationStatus"/>
        <result column="VIEWS_DATE" property="viewsDate"/>
        <result column="VIEWS_COUNT" property="viewsCount"/>
    </resultMap>

<!-- ========================================================================== -->

    <!-- 매출 정보 조회 -->
    <select id="bookingData" resultMap="web">
        SELECT re.BOOKING_NO,
               re.RESULT_AMOUNT,
               re.RESERVATION_DATE,
               re.RESERVATION_STATUS,
               ac.ACCOMMODATION_TYPE
        FROM RESERVE re
        JOIN ROOM ro ON re.ROOM_NO = ro.ROOM_NO
        JOIN ACCOMMODATION ac ON ro.ACCOMMODATION_NO = ac.ACCOMMODATION_NO
    </select>

    <!-- 조회수 조회 -->
    <select id="views" resultMap="web">
        SELECT VIEWS_DATE,
               VIEWS_COUNT
        FROM ACCOMMODATION_VIES
    </select>












</mapper>